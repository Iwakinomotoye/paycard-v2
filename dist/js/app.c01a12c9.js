(function(t){function e(e){for(var a,n,o=e[0],c=e[1],d=e[2],u=0,l=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&l.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);m&&m(e);while(l.length)l.shift()();return i.push.apply(i,d||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,n=1;n<r.length;n++){var o=r[n];0!==s[o]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=r[0]))}return t}var a={},n={app:0},s={app:0},i=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"fddcc7c1"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r={about:1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=new Promise((function(e,r){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"ff9d6e4f"}[t]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var d=i[o],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===a||u===s))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){d=l[o],u=d.getAttribute("data-href");if(u===a||u===s)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var a=e&&e.target&&e.target.src||s,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete n[t],m.parentNode.removeChild(m),r(i)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){n[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,r){a=s[t]=[e,r]}));e.push(a[2]=i);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(t);var l=new Error;d=function(e){u.onerror=u.onload=null,clearTimeout(m);var r=s[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",l.name="ChunkLoadError",l.type=a,l.request=n,r[1](l)}s[t]=void 0}};var m=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(r,a,function(e){return t[e]}.bind(null,a));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/payment-widget/",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var m=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},1052:function(t,e,r){},"1b0b":function(t,e,r){"use strict";r("9e88")},"3fba":function(t,e,r){t.exports=r.p+"img/master.010ab45c.svg"},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("db4d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-link",{staticClass:"app-logo",attrs:{to:"/"}},[a("img",{attrs:{src:r("e4e5"),alt:""}}),a("h1",[t._v("FasterPay")])]),a("router-view")],1)},s=[],i=(r("5c0b"),r("2877")),o={},c=Object(i["a"])(o,n,s,!1,null,null,null),d=c.exports,u=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("country-selector"),r("payment-method-selector"),r("payment-method-form",{attrs:{price:5}})],1)},m=[],p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"pay"}},[r("div",{staticClass:"picker-container"},[r("label",{attrs:{for:"countries"}},[t._v("Select Countries")]),r("select",{staticClass:"selectpicker countrypicker",attrs:{id:"countries","data-flag":"true","data-live-search":"true","data-width":"200px","data-default":this.countryCode},on:{change:function(e){return t.selectCountry()}}})])])},h=[],v=(r("b0c0"),r("bc3a")),f=r.n(v),y=function(t){return new Promise((function(e,r){f.a.get("https://api.paymentwall.com/api/payment-systems/?key=131b3e2f6e5b9cbe0230cbb78dde2fbf&country_code="+t+"&sign_version=2").then((function(t){return e(t.data)})).catch((function(t){r(t)}))}))},g=function(t){return new Promise((function(e,r){f.a.get("https://restcountries.eu/rest/v2/alpha/"+t).then((function(t){return e(t.data.currencies[0])})).catch((function(t){r(t)}))}))},C={name:"CountrySelector",computed:{countryCode:function(){return this.$store.getters.countryCode}},methods:{selectCountry:function(){var t=window.$(".countrypicker option:selected")[0].value;this.$store.dispatch("setCountryCode",t),this.$store.dispatch("resetPaymentMethod"),this.fetchPaymentMethod(),this.fetchCurrency()},fetchPaymentMethod:function(){var t=this;y(this.countryCode).then((function(e){t.$store.dispatch("setPaymentMethodList",e)}))},fetchCurrency:function(){var t=this;g(this.countryCode).then((function(e){t.$store.dispatch("setCurrency",e)}))}},mounted:function(){window.$(".countrypicker").countrypicker(),window.$(".countrypicker").prepend("<option value=''>Select Country</option>"),window.$(".selectpicker").selectpicker(""),window.$(".countrypicker .dropdown-menu.inner").css({"max-width":"84.375vw"}),this.$store.getters.currency&&0===this.$store.getters.currency.name.length&&this.fetchCurrency(),this.$store.getters.paymentMethodList&&0===this.$store.getters.paymentMethodList.length&&this.fetchPaymentMethod()}},b=C,D=(r("1b0b"),Object(i["a"])(b,p,h,!1,null,"630cd997",null)),E=D.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",[t._v("Payment Methods")]),r("div",{staticClass:"payment-methods"},t._l(t.paymentMethods,(function(e){return r("div",{key:e.id,staticClass:"payment-method"},[r("button",{staticClass:"payment-card",on:{click:function(r){return t.changeSelectedMethod(r,e)}}},[r("img",{class:e.img_class,attrs:{src:e.img_url,alt:""}})]),r("p",[t._v(t._s(e.name))])])})),0)])},x=[],_=(r("159b"),{name:"PaymentMethodSelector",data:function(){return{}},computed:{paymentMethods:function(){return this.$store.getters.paymentMethodList}},methods:{changeSelectedMethod:function(t,e){var r=t.target;while(!r.classList.contains("payment-card"))r=r.parentNode;var a=document.querySelectorAll(".payment-method > button");a.forEach((function(t){t.classList.remove("selected")})),r.classList.add("selected"),this.$store.dispatch("setSelectedPaymentMethod",e)}}}),L=_,w=(r("ea50"),Object(i["a"])(L,P,x,!1,null,"0eb11728",null)),N=w.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.paymentMethodSelected?a("div",{staticClass:"payment-form"},[a("p",[t._v("Please enter your card details.")]),a("div",{staticClass:"card-field-container"},[a("div",{staticClass:"card-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardholderName,expression:"cardholderName"}],attrs:{type:"text",id:"card-name"},domProps:{value:t.cardholderName},on:{input:[function(e){e.target.composing||(t.cardholderName=e.target.value)},function(e){return t.cardNameLettersAndLength(e)}],blur:function(e){return t.validateName(e)}}}),a("label",{attrs:{for:"card-name"}},[t._v("Cardholder name")]),a("img",{staticClass:"error-icon",attrs:{src:r("7314"),alt:""}})]),t.cardNameError?a("p",{staticClass:"card-error"},[t._v("Invalid card name")]):t._e()]),a("div",{staticClass:"card-field-container"},[a("div",{staticClass:"card-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.displayedCCDigits,expression:"displayedCCDigits"}],attrs:{type:"text",id:"card-number",maxlength:"19"},domProps:{value:t.displayedCCDigits},on:{input:[function(e){e.target.composing||(t.displayedCCDigits=e.target.value)},function(e){return t.setdisplayedCCDigits(e,!1)}],blur:function(e){return t.setdisplayedCCDigits(e,!0)}}}),a("label",{attrs:{for:"card-number"}},[t._v("Card number")]),t.cardDigitsError?t._e():a("div",[a("img",{staticClass:"visa",attrs:{src:r("f73a"),alt:""}}),a("img",{staticClass:"master",attrs:{src:r("3fba"),alt:""}}),a("img",{staticClass:"amex",attrs:{src:r("a654"),alt:""}})]),a("img",{staticClass:"error-icon",attrs:{src:r("7314"),alt:""}})]),t.cardDigitsError?a("p",{staticClass:"card-error"},[t._v("Invalid card number")]):t._e()]),a("div",{staticClass:"card-field-container"},[a("div",{staticClass:"card-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardExpDate,expression:"cardExpDate"}],attrs:{type:"text",id:"card-exp"},domProps:{value:t.cardExpDate},on:{input:[function(e){e.target.composing||(t.cardExpDate=e.target.value)},function(e){return t.checkExpDate(e)}],blur:function(e){return t.validateExpDate(e)}}}),a("label",{attrs:{for:"card-exp"}},[t._v("Expiration date")]),a("img",{staticClass:"error-icon",attrs:{src:r("7314"),alt:""}})]),t.cardDateError?a("p",{staticClass:"card-error"},[t._v(" Invalid card expiration date ")]):t._e()]),a("div",{staticClass:"card-field-container"},[a("div",{staticClass:"card-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardCvvNumber,expression:"cardCvvNumber"}],attrs:{type:"text",id:"card-cvv",maxlength:"3"},domProps:{value:t.cardCvvNumber},on:{input:[function(e){e.target.composing||(t.cardCvvNumber=e.target.value)},function(e){return t.validateCvv(e,!1)}],blur:function(e){return t.validateCvv(e,!0)}}}),a("label",{attrs:{for:"card-cvv"}},[t._v("CVV")]),a("img",{staticClass:"error-icon",attrs:{src:r("7314"),alt:""}})]),t.cardCvvError?a("p",{staticClass:"card-error"},[t._v("Invalid card CVV number")]):t._e()]),a("button",{staticClass:"next-btn",on:{click:function(e){return t.makePayment()}}},[t._v(" Pay "+t._s(t.formattedPrice)+" "+t._s(t.currency)+" ")])]):t._e()},S=[],$=(r("a9e3"),r("a15b"),r("ac1f"),r("1276"),r("5319"),r("25f0"),{name:"PaymentMethodForm",data:function(){return{displayedCCDigits:"",CCDigits:null,cardholderName:"",cardExpDate:null,cardCvvNumber:null,cardDigitsError:!1,cardNameError:!1,cardDateError:!1,cardCvvError:!1}},props:{price:{type:Number,required:!0}},computed:{currency:function(){return this.$store.getters.getCurrency},formattedPrice:function(){var t=this.price.toLocaleString(void 0,{minimumFractionDigits:2});return t},paymentMethodSelected:function(){var t=this.$store.getters.paymentMethod;return!!(t&&t.name.length>0&&t.id.length>0)&&(this.resetForm(),!0)}},methods:{resetForm:function(){this.displayedCCDigits="",this.CCDigits=null,this.cardholderName="",this.cardExpDate=null,this.cardCvvNumber=null},cardNameLettersAndLength:function(t){var e=t.target;e.className="",this.cardNameError=!1,0!==e.value.length&&(/^[a-zA-Z ]+$/.test(e.value)?/\s/.test(e.value)&&!/^[a-zA-Z]{3,}\s/.test(e.value)?(e.classList.add("invalid"),this.cardNameError=!0):(e.classList.remove("invalid"),this.cardNameError=!1):(e.classList.add("invalid"),this.cardNameError=!0))},validateName:function(t){var e=t.target;this.cardNameLettersAndLength({target:e}),/^[a-zA-Z]{3,}\s[a-zA-Z]{3,}$/.test(e.value)?(e.classList.remove("invalid"),e.classList.add("filled"),this.cardNameError=!1):(e.classList.add("invalid"),this.cardNameError=!0)},setdisplayedCCDigits:function(t,e){var r=t.target;this.CCDigits=this.displayedCCDigits.split(" ").join(""),this.validatedisplayedCCDigits({target:r},e),this.displayedCCDigits=this.displayedCCDigits.toString().replace(/(\d{4})+(?=(\d))/g,"$1 ")},validatedisplayedCCDigits:function(t,e){var r=t.target;r.className="",this.cardDigitsError=!1,(e||0!==this.displayedCCDigits.length)&&(isNaN(this.CCDigits)&&(r.classList.add("invalid"),this.cardDigitsError=!0),/^[0-9]{4,}$/.test(this.CCDigits)&&this.detectCardType({target:r}),e&!/^[0-9]{15,}$/.test(this.CCDigits)&&(r.classList.add("invalid"),this.cardDigitsError=!0),/^[0-9]{15,}$/.test(this.CCDigits)&&this.validateWithLuhn({target:r}))},validateWithLuhn:function(t){for(var e=t.target,r=[],a=0;a<this.CCDigits.length;a++){var n=Number(this.CCDigits[a]);r.push(n)}for(var s=[],i=r.length-1;i>=0;i--){var o=r[i];i%2==0&&(o=2*r[i]),o>9&&(o-=9),s.push(o)}var c=s.reduce((function(t,e){return t+e}));c%10==0?e.classList.add("filled"):(e.classList.add("invalid"),this.cardDigitsError=!0)},detectCardType:function(t){var e=t.target,r=e;if(r.classList.remove("is-master"),r.classList.remove("is-amex"),r.classList.remove("is-visa"),"4"==this.CCDigits[0])r.classList.add("is-visa");else if("5"==this.CCDigits[0])r.classList.add("is-master");else{if("3"!=this.CCDigits[0])return r.classList.add("invalid"),this.cardDigitsError=!0;r.classList.add("is-amex")}},checkExpDate:function(t){var e=t.target;e.className="",this.cardDateError=!1,0!==e.value.length&&(!/^[0-9/]+$/.test(e.value)||!/^\d+\/?/.test(e.value)||/^\d{3,}\/?/.test(e.value)||/^\d{1}\//.test(e.value)||/^\d{2}\/{2,}/.test(e.value)||/^\d{2}\/\d{5,}/.test(e.value))&&this.validateExpDate({target:e})},validateExpDate:function(t){var e=t.target;if(/^\d{2}\/\d{2,4}$/.test(e.value)){var r=e.value.split("/"),a=r[0],n=r[1];if(+a>0&&+a<=12){2===n.length&&(n="20"+n),r=new Date(+n,+a,0,23,59,59);var s=new Date;if(s.getTime()<r.getTime())return e.classList.remove("invalid"),e.classList.add("filled"),this.cardDateError=!1}}e.classList.add("invalid"),this.cardDateError=!0},validateCvv:function(t,e){var r=t.target;if(r.className="",this.cardCvvError=!1,e||!/^\d{0,3}$/.test(r.value)){if(e&&/^\d{3}$/.test(r.value))return r.classList.add("filled"),this.cardCvvError=!1;r.classList.add("invalid"),this.cardCvvError=!0}},makePayment:function(){this.validateName({target:document.querySelector("#card-name")}),this.setdisplayedCCDigits({target:document.querySelector("#card-number")},!0),this.validateExpDate({target:document.querySelector("#card-exp")}),this.validateCvv({target:document.querySelector("#card-cvv")},!0),!1===this.cardDigitsError&&!1===this.cardNameError&&!1===this.cardDateError&&!1===this.cardCvvError&&(this.$store.dispatch("setPaymentStatus","success"),this.$router.push("/payment-status"))}},beforeDestroy:function(){this.$store.dispatch("resetPaymentMethod")}}),k=$,j=(r("af43"),Object(i["a"])(k,M,S,!1,null,"23662976",null)),O=j.exports,A={name:"Home",components:{CountrySelector:E,PaymentMethodSelector:N,PaymentMethodForm:O}},T=A,q=Object(i["a"])(T,l,m,!1,null,null,null),F=q.exports;a["a"].use(u["a"]);var I=[{path:"/",name:"Home",component:F},{path:"/payment-status",name:"PaymentStatus",component:function(){return r.e("about").then(r.bind(null,"e4b7"))}}],z=new u["a"]({mode:"history",base:"/payment-widget/",routes:I}),B=z,V=r("2f62"),Z=r("bfa9");a["a"].use(V["a"]);var H=new Z["a"]({storage:window.localStorage,key:"payment-widget"}),J=new V["a"].Store({state:{paymentMethodList:{},countryCode:"GB",currency:{code:"",name:"",symbol:""},paymentMethod:{id:"",img_class:"",img_url:"",name:""},paymentStatus:""},mutations:{setCountryCode:function(t,e){t.countryCode=e},setPaymentMethodList:function(t,e){t.paymentMethodList=e},setCurrency:function(t,e){t.currency=e},resetPaymentMethod:function(t){t.paymentMethod={id:"",img_class:"",img_url:"",name:""}},setPaymentMethod:function(t,e){t.paymentMethod=e},resetPaymentStatus:function(t){t.paymentStatus=""},setPaymentStatus:function(t,e){t.paymentStatus=e}},actions:{setCountryCode:function(t,e){var r=t.commit;r("setCountryCode",e)},setPaymentMethodList:function(t,e){var r=t.commit;r("setPaymentMethodList",e)},setCurrency:function(t,e){var r=t.commit;r("setCurrency",e)},resetPaymentMethod:function(t){var e=t.commit;e("resetPaymentMethod")},setSelectedPaymentMethod:function(t,e){var r=t.commit;r("setPaymentMethod",e)},resetPaymentStatus:function(t){var e=t.commit;e("resetPaymentStatus")},setPaymentStatus:function(t,e){var r=t.commit;r("setPaymentStatus",e)}},getters:{countryCode:function(t){return t.countryCode},paymentMethodList:function(t){return t.paymentMethodList},getCurrency:function(t){return t.currency.code},paymentMethod:function(t){return t.paymentMethod},paymentStatus:function(t){return t.paymentStatus}},plugins:[H.plugin]});a["a"].config.productionTip=!1,new a["a"]({router:B,store:J,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"71b6":function(t,e,r){},7314:function(t,e,r){t.exports=r.p+"img/error.a9a3df66.svg"},"9c0c":function(t,e,r){},"9e88":function(t,e,r){},a654:function(t,e,r){t.exports=r.p+"img/amex.78a18752.svg"},af43:function(t,e,r){"use strict";r("1052")},e4e5:function(t,e,r){t.exports=r.p+"img/fasterpay.42a06b00.svg"},ea50:function(t,e,r){"use strict";r("71b6")},f73a:function(t,e,r){t.exports=r.p+"img/visa.d1e35ca1.svg"}});
//# sourceMappingURL=app.c01a12c9.js.map